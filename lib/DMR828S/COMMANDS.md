# DMR828S Walkie-Talkie Library - Complete Command Reference\n\n## ğŸ¯ Overview\n\nThis library implements all 35 essential commands for a complete walkie-talkie system based on the DMR828S module protocol. The library provides both high-level convenience functions and low-level protocol access.\n\n## ğŸ“‹ Implemented Commands\n\n### ğŸ”µ 1. Core Radio Operation (Essential)\n\n| Command | Code | Function | Status |\n|---------|------|----------|--------|\n| Set Channel | 0x01 | `setChannel(1-16)` | âœ… |\n| Set Volume | 0x02 | `setVolume(1-9)` | âœ… |\n| Check Status | 0x04 | `getModuleStatus()` | âœ… |\n| RSSI | 0x05 | `getRSSI()` | âœ… |\n\n### ğŸŸ¢ 2. Voice Calling\n\n| Command | Code | Function | Status |\n|---------|------|----------|--------|\n| Call Out/In | 0x06 | `startCall()`, `stopCall()` | âœ… |\n| Query Call Contact | 0x10 | `getCallInContact()` | âœ… |\n\n### ğŸŸ£ 3. SMS Messaging\n\n| Command | Code | Function | Status |\n|---------|------|----------|--------|\n| SMS TX/RX | 0x07 | `sendSMS()` | âœ… |\n| Query SMS | 0x11 | `getLastSMS()` | âœ… |\n\n### ğŸ”´ 4. Emergency Features\n\n| Command | Code | Function | Status |\n|---------|------|----------|--------|\n| Emergency Alarm | 0x09 | `sendEmergencyAlarm()` | âœ… |\n\n### ğŸŸ  5. Audio & Hardware\n\n| Command | Code | Function | Status |\n|---------|------|----------|--------|\n| Mic Gain | 0x0B | `setMicGain()` | âœ… |\n| Duty Mode | 0x0C | `setDutyMode()` | âœ… |\n| Repeater Mode | 0x0E | `setRepeaterMode()` | âœ… |\n\n### ğŸŸ¡ 6. DMR Channel Configuration\n\n| Command | Code | Function | Status |\n|---------|------|----------|--------|\n| Set Frequency | 0x0D | `setFrequency()` | âœ… |\n| SQL Setting | 0x12 | `setSQLLevel()` | âœ… |\n| CTCSS Type | 0x13 | `setCTCSSType()` | âœ… |\n| CTCSS Code | 0x14 | `setCTCSSCode()` | âœ… |\n| TX Power | 0x17 | `setTXPower()` | âœ… |\n| Set Contact | 0x18 | `setContact()` | âœ… |\n| Encryption | 0x19 | `setEncryption()` | âœ… |\n\n### ğŸŸ¤ 7. IDs & Color Code Setup\n\n| Command | Code | Function | Status |\n|---------|------|----------|--------|\n| Set Radio ID | 0x1B | `setRadioID()` | âœ… |\n| Check Radio ID | 0x24 | `getRadioID()` | âœ… |\n| Check Contact ID | 0x22 | `getContactID()` | âœ… |\n| Set Color Code | 0x31 | `setColorCode()` | âœ… |\n| Set Time Slot | 0x33 | `setTimeSlot()` | âœ… |\n\n### ğŸŸ£ 8. RX Group Lists\n\n| Command | Code | Function | Status |\n|---------|------|----------|--------|\n| Add to RX Group | 0x29 | `addContactToRXGroup()` | âœ… |\n| Clear RX Group | 0x30 | `clearRXGroup()` | âœ… |\n\n### âšª 9. Diagnostics\n\n| Command | Code | Function | Status |\n|---------|------|----------|--------|\n| Firmware Version | 0x25 | `getFirmwareVersion()` | âœ… |\n| Encryption Status | 0x28 | `getEncryptionStatus()` | âœ… |\n| Channel Parameters | 0x1D | `getCurrentChannelParams()` | âœ… |\n| Init Status | 0x1A | `getInitializationStatus()` | âœ… |\n\n### ğŸŸ¤ 10. System Commands\n\n| Command | Code | Function | Status |\n|---------|------|----------|--------|\n| Reset Defaults | 0xF0 | `resetToDefaults()` | âœ… |\n| Software Reset | 0xF2 | `softwareReset()` | âœ… |\n\n### ğŸ”§ 11. Advanced Features\n\n| Command | Code | Function | Status |\n|---------|------|----------|--------|\n| Set Bandwidth | 0x32 | `setBandwidth()` | âœ… |\n| Tone On/Off | 0x1C | `setToneOnOff()` | âœ… |\n\n## ğŸ® Usage Examples\n\n### Basic Setup\n```cpp\n#include \"DMR828S.h\"\n\nDMR828S dmr(Serial2);\n\nvoid setup() {\n    Serial2.begin(57600, SERIAL_8N1, 16, 17);\n    dmr.begin(57600);\n    dmr.enableDebug(true);\n    \n    // Configure walkie-talkie\n    dmr.setRadioID(0x000001);\n    dmr.setChannel(1);\n    dmr.setVolume(5);\n    dmr.setColorCode(1);\n    dmr.setTimeSlot(1);\n}\n\nvoid loop() {\n    dmr.update(); // Handle events\n}\n```\n\n### Voice Communication\n```cpp\n// Start a group call\ndmr.startCall(CALL_GROUP, 0x000001);\n\n// Stop call\ndmr.stopCall();\n\n// Private call\ndmr.startCall(CALL_PRIVATE, 0x000123);\n```\n\n### SMS Messaging\n```cpp\n// Send private SMS\ndmr.sendSMS(0x000123, \"Hello World!\");\n\n// Send group SMS\ndmr.sendSMS(0x000001, \"Group message\", true);\n\n// Check for new SMS\nDMRSMSMessage sms;\nif (dmr.getLastSMS(sms)) {\n    Serial.println(sms.message);\n}\n```\n\n### Emergency Features\n```cpp\n// Send emergency alarm\ndmr.sendEmergencyAlarm(0x000001);\n```\n\n### Configuration\n```cpp\n// Channel and audio settings\ndmr.setChannel(5);\ndmr.setVolume(7);\ndmr.setMicGain(10);\ndmr.setTXPower(3);\n\n// DMR specific settings\ndmr.setColorCode(2);\ndmr.setTimeSlot(2);\ndmr.setEncryption(true);\n\n// Frequency settings (in Hz)\ndmr.setFrequency(446000000, 446000000); // 446 MHz\n```\n\n### Status and Diagnostics\n```cpp\n// Check module status\nDMRModuleStatus status = dmr.getModuleStatus();\nswitch(status) {\n    case STATUS_RECEIVING: Serial.println(\"Receiving\"); break;\n    case STATUS_TRANSMITTING: Serial.println(\"Transmitting\"); break;\n    case STATUS_STANDBY: Serial.println(\"Standby\"); break;\n}\n\n// Get RSSI and other info\nuint8_t rssi = dmr.getRSSI();\nuint32_t radioID = dmr.getRadioID();\nString firmware = dmr.getFirmwareVersion();\n\n// Get detailed channel info\nDMRChannelParams params;\nif (dmr.getCurrentChannelParams(params)) {\n    Serial.println(\"TX Freq: \" + String(params.txFreq));\n    Serial.println(\"RX Freq: \" + String(params.rxFreq));\n    Serial.println(\"Power: \" + String(params.power));\n}\n```\n\n### Event Handling\n```cpp\nvoid onSMSReceived(const DMRSMSMessage &sms) {\n    Serial.println(\"SMS from: \" + String(sms.sourceID, HEX));\n    Serial.println(\"Message: \" + String(sms.message));\n}\n\nvoid onCallReceived(const DMRCallInfo &callInfo) {\n    Serial.println(\"Call from: \" + String(callInfo.contactID, HEX));\n}\n\nvoid setup() {\n    // Set callbacks\n    dmr.setSMSReceivedCallback(onSMSReceived);\n    dmr.setCallReceivedCallback(onCallReceived);\n}\n```\n\n### Low-Level Access\n```cpp\n// Access low-level protocol functions\nDMR828S_Utils& lowLevel = dmr.getLowLevel();\n\n// Send custom frame\nuint8_t customData[] = {0x01, 0x02, 0x03};\nlowLevel.sendFrame(0xFF, 0x01, 0x00, customData, 3);\n\n// Read raw frames\nDMRFrame frame;\nif (lowLevel.readFrame(frame)) {\n    // Process raw frame data\n}\n```\n\n## ğŸ›ï¸ Serial Commands (Demo)\n\nThe main demo supports these serial commands:\n\n```\nğŸ“– Available Commands:\n=======================\nCommunication:\n  sms <hex_id> <message>  - Send SMS\n  call <hex_id>           - Private call\n  group <hex_id>          - Group call\n  stop                    - Stop current call\n  emergency               - Send SOS\n\nSettings:\n  channel <1-16>          - Change channel\n  volume <1-9>            - Set volume\n\nInformation:\n  status                  - Show status\n  info                    - Device info\n  help                    - Show commands\n\nExamples:\n  sms 123 Hello World\n  call 456\n  channel 5\n```\n\n## ğŸ—ï¸ Architecture\n\n### Two-Layer Design:\n1. **DMR828S_Utils** (Low-Level): Raw protocol handling\n2. **DMR828S** (High-Level): User-friendly walkie-talkie API\n\n### Key Features:\n- âœ… **Complete Protocol Coverage**: All 35 essential commands implemented\n- ğŸ¯ **Event-Driven**: Callbacks for SMS, calls, and emergencies\n- ğŸ”§ **Flexible Access**: Choose high-level convenience or low-level control\n- ğŸ“± **Real Walkie-Talkie**: Everything needed for a keyboard+display device\n- ğŸ› ï¸ **Easy Integration**: Simple API with comprehensive examples\n\n## ğŸ“š Examples Provided\n\n1. **Complete_Walkie_Talkie.ino** - Full walkie-talkie with buttons and LEDs\n2. **API_Reference.ino** - Demonstrates all API functions\n3. **Simple_DMR.ino** - Basic usage example\n4. **Low_Level_Protocol.ino** - Direct protocol access\n5. **DMR_Demo.ino** - Mixed mode demonstration\n\n## âœ… Ready for Production\n\nThis library provides everything needed to build a complete walkie-talkie device:\n\n- ğŸ“» **Channel Management**: 16 channels with full configuration\n- ğŸ™ï¸ **Voice Communication**: Private, group, and all calls\n- ğŸ“± **SMS Messaging**: Send and receive text messages\n- ğŸš¨ **Emergency Features**: SOS alerts and emergency communication\n- ğŸ”Š **Audio Control**: Volume, mic gain, and tone settings\n- âš™ï¸ **Configuration**: All DMR parameters (color code, time slot, etc.)\n- ğŸ“Š **Status Monitoring**: RSSI, battery, signal strength\n- ğŸ”’ **Security**: Encryption support\n- ğŸ”§ **Diagnostics**: Firmware version, initialization status\n\nPerfect for building walkie-talkie devices with keyboard input and display output! ğŸ¯"